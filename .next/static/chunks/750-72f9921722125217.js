(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[750],{9272:function(e,n,t){"use strict";t.d(n,{I:function(){return o},w:function(){return function e(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new FormData,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return i.forEach(n,(n,o)=>{if(null===n)return;let l=i.isEmpty(r)?o:"".concat(r,"[").concat(o,"]");n instanceof File?t.set(l,n):n instanceof Array?i.forEach(n,e=>{t.append("".concat(l),e)}):n instanceof Object?e(n,t,l):t.set(l,n)}),t}}});let r=t(8998),i=t(6486),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=r(n),i=t.evaluate(e);return i}},4057:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(5893);t(7294);var i=t(5084);function o(e){let{label:n,variant:t="contained",...o}=e;return(0,r.jsx)(i.Z,{variant:t,sx:{fontSize:"1.2rem",padding:"4px 24px",borderRadius:2,textTransform:"none"},...o,children:n})}},9576:function(e,n,t){"use strict";var r=t(5893),i=t(4373);t(7294);let o=e=>{let{direction:n="horizontal",borderColor:t="#EFEFEF",rest:o}=e;return(0,r.jsx)(i.Z,{sx:{borderColor:t},...o,orientation:n,flexItem:!0})};n.Z=o},6595:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var r=t(5893),i=t(7294),o=t(9144),l=t(9072),a=t(9630),s=t(1401),d=t(4373),c=t(7536),u=t(7533),x=t(4057);t(7339);var h=t(9272),p=t(7258);let m=e=>(function e(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r={};for(let i in n)"validation"in n[i]?(console.log("Has validation",n[i].validation),n[i].validation&&(r[i]=function(e){let{id:n,validationType:t,validations:r=[]}=e,i=p[t]();return r.forEach(e=>{let{params:n,type:t}=e;i[t]&&(console.log(t,n),i=i[t](...n))}),i}(n[i].validation))):r[i]=e(n[i],t+1);return p.object().shape(r)})(function(e){let n={};for(let t in e){let r=t.split("."),i=n;for(;r.length>1;){let o=r.shift();i=i[o]=i[o]||{}}i[r[0]]=e[t]}return console.log("Deep",n),n}((0,h.I)(e,'**.fields.{\n        "key":attr.name,\n        "validation":validation\n    }').reduce((e,n)=>(e[n.key]={validation:null==n?void 0:n.validation},e),{})));var v=function(e){let{form:n,submitData:t,edit:h,validationSchema:p,cancelDrawer:v=()=>{}}=e,{register:f,control:g,handleSubmit:j,setValue:Z,getFieldState:b,reset:y,watch:E,formState:{errors:w},getValues:F}=(0,c.cI)({resolver:(0,u.X)(m(n))}),_=(e,n)=>{var t,i,o;let{attr:l}=e,a=e.element,[s,d]=l.name.split(".");return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a,{...l,control:g,register:f,error:b(l.name).error,setValue:Z,isRequired:null===(t=null===(i=null==p?void 0:p.fields[s])||void 0===i?void 0:i.fields[d])||void 0===t?void 0:null===(o=t.exclusiveTests)||void 0===o?void 0:o.required,watch:E,getValues:F})})};return i.useEffect(e=>{h&&y(h),console.log("Data for Edit",h)},[h]),console.log("AppForm Error",w),(0,r.jsx)("form",{onSubmit:j(t),style:{height:"100%"},children:(0,r.jsxs)(o.Z,{justifyContent:"space-between",sx:{height:"100%"},children:[(0,r.jsx)(o.Z,{sx:{padding:3,flex:1,overflow:"auto"},children:(0,r.jsx)(l.ZP,{container:!0,spacing:3,children:null==n?void 0:n.map((e,n)=>{var t;return(0,r.jsxs)(i.Fragment,{children:[(null==e?void 0:e.header)&&(0,r.jsxs)(r.Fragment,{children:[n>0&&(0,r.jsx)(l.ZP,{item:!0,xs:12,children:(0,r.jsx)(d.Z,{orientation:"horizontal",flexItem:!0,sx:{borderColor:"#EFEFEF",marginTop:2,width:"100%"}})}),(0,r.jsx)(l.ZP,{item:!0,xs:12,children:(0,r.jsx)(a.Z,{variant:"h3_bold_secondary",sx:{marginTop:4},children:null==e?void 0:e.header})})]}),null==e?void 0:null===(t=e.fields)||void 0===t?void 0:t.map((e,n)=>(0,r.jsx)(l.ZP,{item:!0,xs:e.size,children:_(e,w)},n))]},n)})})}),(0,r.jsx)(s.Z,{sx:{padding:1.25},square:!0,elevation:2,children:(0,r.jsxs)(o.Z,{direction:"row",justifyContent:"flex-end",spacing:1,children:[v&&(0,r.jsx)(x.Z,{variant:"outlined",label:"Cancel",onClick:v}),(0,r.jsx)(x.Z,{type:"submit",label:h?"Update":"Save",variant:"contained"})]})})]})})}},7339:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(5893),i=t(9630),o=t(1011),l=t(1401);function a(e){let{label:n,register:t,name:a,error:s,isRequired:d,isMultiline:c}=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.Z,{variant:"body_medium_muted",component:"p",mb:1,children:[n,d&&(0,r.jsx)(i.Z,{variant:"body_bold",sx:{marginLeft:"4px",color:"#F53E40"},children:"*"})]}),(0,r.jsx)(l.Z,{elevation:0,sx:{alignItems:"center",backgroundColor:"background.main",border:"1px solid #EFEFEF",borderRadius:2,display:"flex",marginTop:0,p:1},children:(0,r.jsx)(o.ZP,{sx:{ml:1,flex:1,fontSize:"1.4rem",fontWeight:500,color:"text.secondary"},error:!!(null==s?void 0:s.message),placeholder:n,inputProps:{"aria-label":n},...t(a),multiline:c,rows:4})}),(null==s?void 0:s.message)&&(0,r.jsx)(i.Z,{variant:"h6",sx:{marginLeft:"4px",color:"red"},children:s.message})]})}t(7294)},1244:function(e,n,t){"use strict";t.d(n,{Z:function(){return T}});var r=t(5893),i=t(9144),o=t(4057),l=t(9576),a=t(6595),s=t(2761),d=t(1011),c=t(1401),u=t(7294);function x(e){let{...n}=e;return(0,r.jsxs)(c.Z,{elevation:0,sx:{alignItems:"center",backgroundColor:"background.main",border:"1px solid #EFEFEF",borderRadius:2,display:"flex",marginTop:0,flex:"auto"},children:[(0,r.jsx)(s.Z,{sx:{fontSize:"1.4rem",margin:"15px 12px 15px 20px",color:"text.muted"}}),(0,r.jsx)(d.ZP,{sx:{ml:1,flex:1,fontSize:"1.4rem",color:"text.secondary"},placeholder:"Search Department",inputProps:{"aria-label":"search department"}})]})}var h=t(4578),p=t(8767);t(681);var m=t(8560),v=t(9272),f=t(9630),g=t(562),j=t(5088),Z=t(1538),b=t(7976),y=t(5071),E=t(1733);let w=["Edit","Delete"];function F(e){let{label:n="",cb:t={}}=e,[o,l]=u.useState(null),a=Boolean(o),s=e=>{l(e.currentTarget)},d=()=>{l(null)},c=e=>{let n=t[e];n&&(n(),d())};return(0,r.jsxs)(i.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{border:"1px solid #E4E7EB",borderRadius:1,padding:2},children:[(0,r.jsx)(f.Z,{variant:"h3_medium_secondary",component:"h3",children:n}),(0,r.jsxs)("div",{children:[(0,r.jsx)(g.Z,{"aria-label":"more",id:"long-button","aria-controls":a?"long-menu":void 0,"aria-expanded":a?"true":void 0,"aria-haspopup":"true",onClick:s,children:(0,r.jsx)(b.Z,{fontSize:"large",sx:{color:"text.secondary"}})}),(0,r.jsx)(j.Z,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:o,open:a,onClose:d,PaperProps:{style:{maxHeight:216,width:"auto"}},children:w.map(e=>(0,r.jsxs)(Z.Z,{selected:"Pyxis"===e,onClick:()=>c(e),children:[(0,r.jsx)(f.Z,{mr:1,variant:"body_medium_tertiary",component:"p",children:"Delete"===e?(0,r.jsx)(E.Z,{sx:{color:"#F53E40"}}):(0,r.jsx)(y.Z,{})}),(0,r.jsx)(f.Z,{sx:{color:"Delete"===e&&"#F53E40"},variant:"body_medium_tertiary",component:"p",children:e})]},e))})]})]})}var _=t(4631),k=t(3772),S=t(1953),C=function(e){let{open:n=!1,callback:t,title:o,children:l}=e,[a,s]=u.useState(n);return(0,r.jsx)("div",{children:(0,r.jsx)(_.ZP,{anchor:"right",open:a,sx:{"& .MuiDrawer-paper":{width:"50%"}},children:(0,r.jsx)(S.Z,{role:"presentation",children:(0,r.jsxs)(i.Z,{sx:{height:"100vh"},children:[(0,r.jsx)(c.Z,{square:!0,elevation:2,children:(0,r.jsxs)(i.Z,{direction:"row",justifyContent:"space-between",sx:{margin:1.25,flexBasis:"auto"},children:[(0,r.jsx)(i.Z,{alignItems:"center",justifyContent:"center",children:(0,r.jsx)(f.Z,{variant:"h1_bold_secondary",component:"h1",children:o})}),(0,r.jsx)(i.Z,{children:(0,r.jsx)(g.Z,{onClick(e){e&&"keydown"===e.type&&("Tab"===e.key||"Shift"===e.key)||(t(!1),s(!1))},sx:{padding:0},children:(0,r.jsx)(k.Z,{sx:{fontSize:"2.2rem",margin:"15px",color:"#000"}})})})]})}),l]})})})})};let P=e=>{var n,t;let{config:s}=e,{endpoint:d,texts:c,getAllFn:f,postFn:g,key:j,deleteFn:Z,validation:b,putFn:y,transform:E=e=>e}=s,w=(0,m.Z)(e=>e.setProgress),_=(0,h.VY)(),k=(0,p.useQueryClient)(),[S,P]=u.useState(!1),[T,D]=(0,u.useState)(null),{isLoading:z,data:I,error:R}=(0,p.useQuery)("get"+j,()=>f(d,{page:1})),B=(0,p.useMutation)(e=>T?y(d,T,E(e),w):g(d,E(e),w),{onSuccess(){P(!1),k.invalidateQueries("get"+j),_.success(T?"Updated":"created")},onError(e){_.error("Failed")}}),q=(0,p.useMutation)(e=>Z(d,e),{onSuccess(){k.invalidateQueries("get"+j),_("Deleted"),P(!1)},onError(e){_("Failed")}}),A=e=>{P(!0),D(e)},M=e=>{window.confirm("Do you want to delete this ? ")&&q.mutate({id:e})};return(0,u.useEffect)(e=>{S||D(null)},[S]),(0,r.jsxs)(i.Z,{spacing:2,m:2,divider:(0,r.jsx)(l.Z,{}),children:[(0,r.jsxs)(i.Z,{direction:"row",spacing:3,children:[(0,r.jsx)(x,{sx:{flex:1}}),(0,r.jsx)(o.Z,{label:null==c?void 0:c.drawerTitle,variant:"contained",onClick:()=>P(!0)}),S&&(0,r.jsx)(C,{open:S,callback:P,title:T?null==c?void 0:null===(n=c.drawerTitle)||void 0===n?void 0:n.replace("Add","Update"):null==c?void 0:c.drawerTitle,children:(0,r.jsx)(a.Z,{form:s.form,edit:T?{...I.data.find(e=>e.id==T)}:null,submitData:e=>B.mutate({...e}),validationSchema:b,cancelDrawer:()=>P(!1)})})]}),(0,r.jsx)(i.Z,{sx:{rowGap:1},children:z?"Loading":null==I?void 0:null===(t=I.data)||void 0===t?void 0:t.map((e,n)=>(0,r.jsx)(F,{label:(0,v.I)(e,"**.".concat(c.key)),cb:{Edit:()=>A(e.id),Delete:()=>M(e.id)}},n))})]})};var T=P},4742:function(e,n,t){"use strict";var r=t(5893),i=t(7294),o=t(1225),l=t(8346),a=t(1953),s=t(9144),d=t(4489),c=t(1401),u=t(9072),x=t(9630);t(1664),t(9576),n.Z=i.memo(function(e){let{children:n,texts:t}=e,i=(0,o.Z)("(max-width:900px)"),h=[(0,r.jsx)(l.Z,{href:"/app/settings",sx:{fontSize:"1.6rem",fontWeight:600,color:"primary.main",cursor:"pointer"},underline:"hover",color:"inherit",children:"SETTINGS"},"1"),(0,r.jsx)(x.Z,{variant:"h3_bold_secondary",children:null==t?void 0:t.breadcrumbText},"2")];return(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(s.Z,{sx:{padding:2,background:"#FAFBFC",borderBottom:"1px solid #EBEBEB"},children:(0,r.jsx)(d.Z,{separator:">",sx:{"& .MuiBreadcrumbs-separator":{fontSize:"2rem",fontWeight:500}},"aria-label":"breadcrumb",children:h})}),(0,r.jsx)(s.Z,{sx:{margin:2,background:"#F5F6FA"},children:(0,r.jsx)(c.Z,{sx:{border:"1px solid #EFEFEF",borderRadius:2.5,overflow:"hidden"},variant:"outlined",children:(0,r.jsxs)(u.ZP,{container:!0,direction:"row",children:[(0,r.jsxs)(u.ZP,{item:!0,md:8,xs:12,sx:!i&&{borderRight:"1px solid #EFEFEF"},children:[(0,r.jsxs)(a.Z,{sx:{px:2.5,pt:2.5},children:[(0,r.jsx)(x.Z,{variant:"h2_bold_secondary",component:"h2",children:null==t?void 0:t.mainTitle}),(0,r.jsx)(x.Z,{variant:"body_medium_muted",component:"p",children:null==t?void 0:t.mainDescription})]}),(0,r.jsx)(s.Z,{sx:{height:"80vh",paddingRight:1,paddingTop:3},children:n})]}),(0,r.jsx)(u.ZP,{item:!0,md:4,sx:i?{display:"none"}:{display:"block"},children:(0,r.jsxs)(s.Z,{sx:{margin:2.5},spacing:1,children:[(0,r.jsx)(x.Z,{variant:"h2_bold_secondary",children:null==t?void 0:t.sideTitle}),(0,r.jsx)(x.Z,{variant:"h3_medium_muted",children:null==t?void 0:t.sideDescription})]})})]})})})]})})},681:function(e,n,t){"use strict";var r=t(594);let i=r.Z.create({baseURL:"http://ec2-54-161-143-145.compute-1.amazonaws.com:3000/api/v1/"});var o=t(129);let l=async e=>{let{path:n="/",method:t="get",data:r=null,secure:l=!0,uploadProgessCB:a=()=>{}}=e;if(console.log("api calls",r),"get"==t&&r){console.log("",r);let s=o.stringify(r,{addQueryPrefix:!0});n+=s}try{let{data:d,status:c}=await i({url:n,method:t,data:r,headers:{"X-TENANT-ID":"2c9bc840-74c1-11ed-a1eb-0242ac120011"},onUploadProgress(e){let n=Math.round(100*e.loaded/e.total);console.log("percent",n),a(n)}});return{success:!0,data:d.data,status:c,message:"success"}}catch(u){if(console.log(u),u.response)throw{success:!1,data:u.response.data,status:u.response.status,message:"Response Error"};if(u.request)throw console.log(u.request),{success:!1,data:null,status:null,message:"Request Error"};throw{success:!1,data:null,status:null,message:"Request Set up Error"}}};n.Z=l},558:function(e,n,t){"use strict";t.d(n,{$8:function(){return i},WN:function(){return a},fj:function(){return o},m7:function(){return l}});var r=t(681);let i=(e,n)=>(0,r.Z)({path:e,method:"get",data:n}),o=(e,n,t)=>(0,r.Z)({path:e,method:"post",data:n,uploadProgessCB:t}),l=(e,n,t,i)=>(0,r.Z)({path:e+"/"+n,method:"put",data:t,uploadProgessCB:i}),a=(e,n)=>(0,r.Z)({path:e+"/"+(null==n?void 0:n.id),method:"delete"})},4654:function(){}}]);