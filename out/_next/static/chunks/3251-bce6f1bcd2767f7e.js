"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3251],{88345:function(e,t,i){i.d(t,{Z:function(){return m}});var a=i(85893),n=i(67294),o=i(68245),r=i(15861),s=i(98456),l=i(90629),d=i(13970),u=i(75503),p=i(88767),c=i(87536);function m(e){var t;let{setValue:i,reset:m,label:x,options:v=[{text:"",value:""}],name:y,error:g,isRequired:f,asyncData:b,watch:h,resetField:Z,control:j,getValues:S,...k}=e,C=(0,c.qo)({control:j,name:null==b?void 0:b.lookup}),[T,A]=n.useState("");console.log("watchFields",y,null==b?void 0:b.lookup,C);let{isLoading:q,data:E,error:w,isSuccess:F}=(0,p.useQuery)({queryKey:["get"+(null==b?void 0:b.key),...(null==b?void 0:b.lookup)||[],C,T],queryFn:()=>b.endpointApi("function"==typeof b.endpoint?b.endpoint(C):b.endpoint,{name:T}),enabled:null==b||!b.lookup||(Array.isArray(C)?!C.some(e=>!e):!!C)}),[_,z]=n.useState(!1),[L,P]=n.useState([]),D=_&&0===L.length;return n.useEffect(()=>{let e=!0;if(D)return(async()=>{e&&P([...(null==E?void 0:E.data.map((null==b?void 0:b.optionTransformation)||(e=>({text:e.name,value:e.id||e.stateCode||e.code||e.isoCode}))))||[]])})(),()=>{e=!1}},[D]),(0,a.jsxs)("div",{children:[(0,a.jsxs)(r.Z,{variant:"body_medium_muted",component:"p",mb:1,children:[x,f&&(0,a.jsx)(r.Z,{variant:"body_bold",sx:{marginLeft:"4px",color:"#F53E40"},children:"*"})]}),(0,a.jsx)(o.Z,{popupIcon:q?(0,a.jsx)(s.Z,{color:"inherit",size:20}):(0,a.jsx)(u.Z,{}),sx:{".MuiAutocomplete-option":{color:"#333",fontSize:"1.4rem"},".MuiAutocomplete-endAdornment":{svg:{fontSize:"2rem",fontWeight:500,color:"text.secondary"}}},open:_,onOpen(){z(!0)},onClose(){z(!1)},value:null===(t=S(y))||void 0===t?void 0:t.value,isOptionEqualToValue:(e,t)=>e.value===t.value,onChange:(e,t)=>i(y,t),getOptionLabel:e=>e.text,options:L,loading:q,renderOption:(e,t,i)=>(0,a.jsx)("li",{...e,children:(0,a.jsx)(r.Z,{variant:"body_medium_secondary",component:"p",children:t.text})}),onInputChange(e,t){A(t)},renderInput:e=>(0,a.jsx)(l.Z,{elevation:0,sx:{alignItems:"center",backgroundColor:"background.main",border:"1px solid #EFEFEF",borderRadius:2,display:"flex",marginTop:0,p:1},ref:e.InputProps.ref,children:(0,a.jsx)(d.ZP,{sx:{ml:1,flex:1,fontSize:"1.4rem",fontWeight:500,color:"text.secondary"},...e,endAdornment:(0,a.jsx)(n.Fragment,{children:e.InputProps.endAdornment}),...k})})})]},JSON.stringify(C))}},69745:function(e,t,i){i.d(t,{Z:function(){return p}});var a=i(85893);i(67294);var n=i(87357),o=i(15861),r=i(18360),s=i(18972),l=i(90948),d=i(13970),u=i(75503);function p(e){let{label:t,name:i,options:l,register:d,setValue:p,error:m,isRequired:x,getValues:v,watch:y,hideLabel:g=!1,...f}=e;return(0,a.jsxs)(n.Z,{sx:{width:"100%"},children:[!g&&(0,a.jsxs)(o.Z,{variant:"body_medium_muted",component:"p",mb:1,children:[t,x&&(0,a.jsx)(o.Z,{variant:"body_bold",sx:{marginLeft:"4px",color:"#F53E40"},children:"*"})]}),(0,a.jsxs)(r.Z,{...d&&d,...f,input:(0,a.jsx)(c,{}),IconComponent:u.Z,sx:{fontSize:"1.4rem",fontWeight:500,color:"text.secondary",width:"100%"},children:[(0,a.jsx)(s.Z,{selected:!0,sx:{fontSize:"1.4rem",color:"text.secondary",fontStyle:"italic"},value:"",children:"None"}),l.length&&l.map((e,t)=>(0,a.jsx)(s.Z,{sx:{fontSize:"1.4rem",fontWeight:500,color:"text.secondary"},value:e.value,disabled:e.disabled,children:e.text},t))]}),(null==m?void 0:m.message)&&(0,a.jsx)(o.Z,{variant:"h6",sx:{marginLeft:"4px",color:"red"},children:m.message})]})}let c=(0,l.ZP)(d.ZP)(e=>{let{theme:t}=e;return{alignItems:"center",backgroundColor:t.palette.background.main,border:"1px solid #EFEFEF",borderRadius:t.spacing(1),display:"flex",fontSize:"1.4rem",transition:t.transitions.create(["border-color","box-shadow"]),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},"label + &":{marginTop:t.spacing(3)},"& .MuiInputBase-input":{color:t.palette.text.secondary,padding:"".concat(t.spacing(1.25)," ").concat(t.spacing(2))},"& .MuiSvgIcon-root":{fontSize:"2rem",marginRight:2,color:t.palette.text.tertiary}}})},19716:function(e,t,i){i.d(t,{Z:function(){return s}});var a=i(85893),n=i(42761),o=i(13970),r=i(90629);function s(e){let{...t}=e;return(0,a.jsxs)(r.Z,{elevation:0,sx:{alignItems:"center",backgroundColor:"background.main",border:"1px solid #EFEFEF",borderRadius:2,display:"flex",marginTop:0,flex:"auto"},children:[(0,a.jsx)(n.Z,{sx:{fontSize:"1.4rem",margin:"15px 12px 15px 20px",color:"text.muted"}}),(0,a.jsx)(o.ZP,{sx:{ml:1,flex:1,fontSize:"1.4rem",color:"text.secondary"},placeholder:"Search Department",inputProps:{"aria-label":"search department"}})]})}i(67294)},44889:function(e,t,i){i.d(t,{Z:function(){return E}});var a=i(85893),n=i(26447),o=i(44057),r=i(9576),s=i(76595),l=i(19716),d=i(67294),u=i(34578),p=i(88767);i(80681);var c=i(38560),m=i(39272),x=i(15861),v=i(87357),y=i(93946),g=i(35294),f=i(18972),b=i(57976),h=i(75071),Z=i(41733),j=i(25675),S=i.n(j),k=i(1574);let C=["Edit","Delete"];function T(e){let{label:t="",cb:i={}}=e,[o,r]=d.useState(null),s=Boolean(o),l=e=>{r(e.currentTarget)},u=()=>{r(null)},p=e=>{let t=i[e];t&&(t(),u())};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(n.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{border:"1px solid #E4E7EB",borderRadius:1,padding:2},children:[(0,a.jsxs)(n.Z,{direction:"row",alignItems:"center",spacing:1.5,children:[(0,a.jsx)(S(),{src:"/images/starYellow.svg",width:20,height:20,alt:"favourite"}),(0,a.jsx)(k.Z,{size:18,colorVal:"#46C0C0"}),(0,a.jsx)(x.Z,{variant:"h3_medium_secondary",component:"h3",children:t})]}),(0,a.jsx)(n.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:(0,a.jsxs)(v.Z,{children:[(0,a.jsx)(y.Z,{"aria-label":"more",id:"long-button","aria-controls":s?"long-menu":void 0,"aria-expanded":s?"true":void 0,"aria-haspopup":"true",onClick:l,children:(0,a.jsx)(b.Z,{sx:{color:"text.secondary",fontSize:"2rem"}})}),(0,a.jsx)(g.Z,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:o,open:s,onClose:u,PaperProps:{style:{maxHeight:216,width:"auto"}},children:C.map(e=>(0,a.jsxs)(f.Z,{selected:"Pyxis"===e,onClick:()=>p(e),children:[(0,a.jsx)(x.Z,{mr:1,variant:"body_medium_tertiary",component:"p",children:"Delete"===e?(0,a.jsx)(Z.Z,{sx:{color:"#F53E40"}}):(0,a.jsx)(h.Z,{})}),(0,a.jsx)(x.Z,{sx:{color:"Delete"===e&&"#F53E40"},variant:"body_medium_tertiary",component:"p",children:e})]},e))})]})})]})})}var A=i(71666);let q=e=>{var t,i;let{config:x}=e,{endpoint:v,texts:y,getAllFn:g,postFn:f,key:b,deleteFn:h,validation:Z,putFn:j,transform:S=e=>e}=x,k=(0,c.Z)(e=>e.setProgress),C=(0,u.VY)(),q=(0,p.useQueryClient)(),[E,w]=d.useState(!1),[F,_]=(0,d.useState)(null),{isLoading:z,data:L,error:P}=(0,p.useQuery)("get"+b,()=>g(v,{page:1})),D=(0,p.useMutation)(e=>F?j(v,F,S(e),k):f(v,S(e),k),{onSuccess(){w(!1),q.invalidateQueries("get"+b),C.success(F?"Updated":"created")},onError(e){C.error("Failed")}}),N=(0,p.useMutation)(e=>h(v,e),{onSuccess(){q.invalidateQueries("get"+b),C("Deleted"),w(!1)},onError(e){C("Failed")}}),I=e=>{w(!0),_(e)},R=e=>{window.confirm("Do you want to delete this ? ")&&N.mutate({id:e})};return(0,d.useEffect)(e=>{E||_(null)},[E]),(0,a.jsxs)(n.Z,{spacing:2,m:2,divider:(0,a.jsx)(r.Z,{}),children:[(0,a.jsxs)(n.Z,{direction:"row",spacing:3,children:[(0,a.jsx)(l.Z,{sx:{flex:1}}),(0,a.jsx)(o.Z,{variant:"contained",onClick:()=>w(!0),children:null==y?void 0:y.drawerTitle}),E&&(0,a.jsx)(A.Z,{open:E,callback:w,title:F?null==y?void 0:null===(t=y.drawerTitle)||void 0===t?void 0:t.replace("Add","Update"):null==y?void 0:y.drawerTitle,children:(0,a.jsx)(s.Z,{form:x.form,edit:F?{...L.data.find(e=>e.id==F)}:null,submitData:e=>D.mutate({...e}),validationSchema:Z,cancelDrawer:()=>w(!1)})})]}),(0,a.jsx)(n.Z,{sx:{rowGap:1},children:z?"Loading":null==L?void 0:null===(i=L.data)||void 0===i?void 0:i.map((e,t)=>(0,a.jsx)(T,{label:(0,m.I)(e,"**.".concat(y.key)),cb:{Edit:()=>I(e.id),Delete:()=>R(e.id)}},t))})]})};var E=q},19127:function(e,t,i){var a=i(85893),n=i(26447),o=i(87357),r=i(44057),s=i(9576);i(76595);var l=i(19716),d=i(67294),u=i(34578),p=i(88767);i(80681);var c=i(38560);i(39272);var m=i(71666),x=i(45698);let v=e=>{var t;let{plan:i}=e;(0,c.Z)(e=>e.setProgress),(0,u.VY)(),(0,p.useQueryClient)();let[v,y]=d.useState(!1),[g,f]=(0,d.useState)(null);return(0,d.useEffect)(e=>{v||f(null)},[v]),(0,a.jsx)(n.Z,{spacing:2,m:2,divider:(0,a.jsx)(s.Z,{}),children:(0,a.jsxs)(n.Z,{direction:"row",spacing:3,children:[(0,a.jsx)(l.Z,{sx:{flex:1}}),(0,a.jsx)(r.Z,{variant:"contained",onClick:()=>y(!0),children:null==i?void 0:i.sideBarTitle}),v&&(0,a.jsx)(m.Z,{open:v,callback:y,title:g?null==i?void 0:null===(t=i.sideBarTitle)||void 0===t?void 0:t.replace("Add","Update"):null==i?void 0:i.sideBarTitle,children:(0,a.jsx)(o.Z,{p:2,children:(0,a.jsx)(x.Z,{plan:i})})})]})})};t.Z=v},43251:function(e,t,i){i.r(t),i.d(t,{addressFields:function(){return x},default:function(){return g}});var a=i(85893),n=i(19127),o=i(88345),r=i(69745),s=i(77339);i(44889);var l=i(54742),d=i(67294),u=i(87536),p=i(88767),c=i(558);let m=[{element:s.Z,attr:{label:"Station Name",name:"station.stationName"},validation:{validationType:"string",validations:[{type:"required",params:["Station Name is Required"]}]},xs:6},{element:r.Z,attr:{label:"Is main station?",name:"station.isMainStation",options:[{text:"Yes",value:!0},{text:"No",value:!1}]},xs:6},{element:r.Z,attr:{label:"Station Head",name:"station.stationHead",options:[{text:"Employee 1",value:"e1"},{text:"Employee 2",value:"e2"}]},validation:{validationType:"string",validations:[{type:"required",params:["Station Head is Required"]}]},xs:12}],x=[{element:s.Z,attr:{label:"Address Line 1",name:"address.addressLn1"},validation:{validationType:"string",validations:[{type:"required",params:["Address Line 1 is Required"]}]},xs:12},{element:s.Z,attr:{label:"Address Line 2",name:"address.addressLn2"},xs:12},{element:o.Z,attr:{label:"Country",name:"address.country",asyncData:{endpointApi:c.$8,endpoint:"app/valueHelp/countries",key:"countries",optionTransformation:e=>({text:e.name,value:e.code})}},validation:{validationType:"object",validations:[{type:"nullable",params:["Country is Required"]},{type:"required",params:["Country is Required"]}]},xs:6},{element:o.Z,attr:{label:"State",name:"address.state",asyncData:{endpointApi:c.$8,endpoint(e){var t;return"app/valueHelp/states/".concat((null===(t=e[0])||void 0===t?void 0:t.value)||"")},optionTransformation:e=>({text:e.name,value:e.isoCode}),lookup:["address.country"],key:"states"}},validation:{validationType:"object",validations:[{type:"required",params:["State is Required"]}]},xs:6},{element:o.Z,attr:{label:"City",name:"address.city",asyncData:{endpointApi:c.$8,endpoint(e){var t,i;return"app/valueHelp/cities/".concat((null===(t=e[0])||void 0===t?void 0:t.value)||"","/").concat((null===(i=e[1])||void 0===i?void 0:i.value)||"")},lookup:["address.country","address.state"],key:"city",optionTransformation:e=>({text:e.name,value:e.name})}},validation:{validationType:"object",validations:[{type:"required",params:["City is Required"]}]},xs:6},{element:s.Z,attr:{label:"Postal Code",name:"address.postalCode"},validation:{validationType:"string",validations:[{type:"required",params:["Postal code is Required"]}]},xs:6},{element:s.Z,attr:{label:"Phone",name:"address.phone1"},validation:{validationType:"string",validations:[{type:"required",params:["Phone number is Required"]}]},xs:6}],v={key:"stationName",form:[{header:"",fields:m},{header:"Station Address",fields:x}],endpoint:"settings/station",texts:{key:"stationName",breadcrumbText:"Station",drawerTitle:"Add Station",mainTitle:"List of Stations",mainDescription:"this is short description for division",sideTitle:"Station",sideDescription:"this is long long long for division saldkf skflas asfkjdsadklfsadf salkdfklajsfkjlsad lorem description Lorem, ipsum dolor sit amet consectetur adipisicing elit. Qui quidem neque exercitationem aperiam laboriosam at, tempore ipsam natus alias repellat dolorum. Totam commodi eius dolorem laudantium dolores explicabo ex id."},getAllFn:c.$8,postFn:c.fj,putFn:c.m7,deleteFn:c.WN},y={sideBarTitle:"Add Station",section:{fields:[{label:"Station Name",type:"Text",id:"stationName",gridSizes:{xs:12,sm:6,md:6,lg:6},config:{placeholder:"Station Name"},validations:[{type:"required"}]},{label:"Is main station?",type:"Select",gridSizes:{xs:12,sm:6,md:6,lg:6},id:"isMainStation",validations:[{type:"required"}],select:{type:"inLine",options:[{value:"None",label:"None"},{value:"Yes",label:"Yes"},{value:"No",label:"No"}]}},{label:"Description",type:"Text",id:"description",gridSizes:{xs:12,sm:6,md:12,lg:12},isMultiline:!0,config:{placeholder:"Description"},validations:[{type:"required"}]},{label:"Station Head",type:"Select",gridSizes:{xs:12,sm:6,md:12,lg:12},id:"stationHead",validations:[{type:"required"}],select:{type:"inLine",options:[{value:"30",label:"30 Days"},{value:"60",label:"60 Days"},{value:"90",label:"90 Days"}]}},{type:"Divider"},{type:"Title",title:"Primary Address"},{label:"Address Line 1",type:"Text",id:"primaryAddress_addressLine1",gridSizes:{xs:12,sm:6,md:12,lg:12},config:{placeholder:"Address Line 1"},validations:[{type:"required"}]},{label:"Address Line 2",type:"Text",id:"primaryAddress_addressLine2",gridSizes:{xs:12,sm:6,md:12,lg:12},config:{placeholder:"Address Line 2"},validations:[]},{label:"Country",type:"Select",id:"primaryAddress_country",gridSizes:{xs:12,sm:6,md:6,lg:6},config:{placeholder:"Country"},validations:[],select:{type:"api",api:"app/valueHelp/countries"}},{label:"State",type:"Select",id:"primaryAddress_state",gridSizes:{xs:12,sm:6,md:6,lg:6},validations:[],select:{type:"api",api:"app/valueHelp/states/${primaryAddress_country}"}},{label:"City",type:"Select",id:"primaryAddressCity",gridSizes:{xs:12,sm:6,md:6,lg:6},validations:[],select:{type:"api",api:"app/valueHelp/cities/${primaryAddress_country}/${primaryAddress_state}"}},{label:"Postal Code",type:"Text",id:"postalCode",gridSizes:{xs:12,sm:6,md:6,lg:6},config:{placeholder:"Postal Code",type:"number"},validations:[{type:"required"}]},{label:"Phone",type:"PhoneNumber",id:"phone",gridSizes:{xs:12,sm:6,md:6,lg:6},validations:[{type:"required",vtype:"number"},{type:"Length",length:{min:13,max:15}}]}]}};function g(){let{watch:e}=(0,u.cI)();(0,p.useQueryClient)();let[t,i]=(0,d.useState)(""),[o,r]=(0,d.useState)("");console.log(e("city"),"lklk"),console.log(v,"lklk");let{isLoading:s,data:c,error:m}=(0,p.useQuery)("getcountries",()=>v.getAllFn("app/valueHelp/countries"));return console.log(c,"response"),(0,a.jsx)(l.Z,{texts:v.texts,children:(0,a.jsx)(n.Z,{plan:y})})}}}]);