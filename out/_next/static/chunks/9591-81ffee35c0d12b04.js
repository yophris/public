"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9591],{69745:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(85893);r(67294);var i=r(87357),o=r(15861),a=r(18360),l=r(18972),s=r(90948),d=r(13970),c=r(75503);function u(e){let{label:t,name:r,options:s,register:d,setValue:u,error:m,isRequired:p,getValues:h,watch:g,hideLabel:v=!1,...f}=e;return(0,n.jsxs)(i.Z,{sx:{width:"100%"},children:[!v&&(0,n.jsxs)(o.Z,{variant:"body_medium_muted",component:"p",mb:1,children:[t,p&&(0,n.jsx)(o.Z,{variant:"body_bold",sx:{marginLeft:"4px",color:"#F53E40"},children:"*"})]}),(0,n.jsxs)(a.Z,{...d&&d,...f,input:(0,n.jsx)(x,{}),IconComponent:c.Z,sx:{fontSize:"1.4rem",fontWeight:500,color:"text.secondary",width:"100%"},children:[(0,n.jsx)(l.Z,{selected:!0,sx:{fontSize:"1.4rem",color:"text.secondary",fontStyle:"italic"},value:"",children:"None"}),s.length&&s.map((e,t)=>(0,n.jsx)(l.Z,{sx:{fontSize:"1.4rem",fontWeight:500,color:"text.secondary"},value:e.value,disabled:e.disabled,children:e.text},t))]}),(null==m?void 0:m.message)&&(0,n.jsx)(o.Z,{variant:"h6",sx:{marginLeft:"4px",color:"red"},children:m.message})]})}let x=(0,s.ZP)(d.ZP)(e=>{let{theme:t}=e;return{alignItems:"center",backgroundColor:t.palette.background.main,border:"1px solid #EFEFEF",borderRadius:t.spacing(1),display:"flex",fontSize:"1.4rem",transition:t.transitions.create(["border-color","box-shadow"]),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},"label + &":{marginTop:t.spacing(3)},"& .MuiInputBase-input":{color:t.palette.text.secondary,padding:"".concat(t.spacing(1.25)," ").concat(t.spacing(2))},"& .MuiSvgIcon-root":{fontSize:"2rem",marginRight:2,color:t.palette.text.tertiary}}})},19716:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(85893),i=r(42761),o=r(13970),a=r(90629);function l(e){let{...t}=e;return(0,n.jsxs)(a.Z,{elevation:0,sx:{alignItems:"center",backgroundColor:"background.main",border:"1px solid #EFEFEF",borderRadius:2,display:"flex",marginTop:0,flex:"auto"},children:[(0,n.jsx)(i.Z,{sx:{fontSize:"1.4rem",margin:"15px 12px 15px 20px",color:"text.muted"}}),(0,n.jsx)(o.ZP,{sx:{ml:1,flex:1,fontSize:"1.4rem",color:"text.secondary"},placeholder:"Search Department",inputProps:{"aria-label":"search department"}})]})}r(67294)},44889:function(e,t,r){r.d(t,{Z:function(){return I}});var n=r(85893),i=r(26447),o=r(44057),a=r(9576),l=r(76595),s=r(19716),d=r(67294),c=r(34578),u=r(88767);r(80681);var x=r(38560),m=r(39272),p=r(15861),h=r(87357),g=r(93946),v=r(35294),f=r(18972),b=r(57976),j=r(75071),Z=r(41733),y=r(25675),w=r.n(y),E=r(1574);let S=["Edit","Delete"];function C(e){let{label:t="",cb:r={}}=e,[o,a]=d.useState(null),l=Boolean(o),s=e=>{a(e.currentTarget)},c=()=>{a(null)},u=e=>{let t=r[e];t&&(t(),c())};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{border:"1px solid #E4E7EB",borderRadius:1,padding:2},children:[(0,n.jsxs)(i.Z,{direction:"row",alignItems:"center",spacing:1.5,children:[(0,n.jsx)(w(),{src:"/images/starYellow.svg",width:20,height:20,alt:"favourite"}),(0,n.jsx)(E.Z,{size:18,colorVal:"#46C0C0"}),(0,n.jsx)(p.Z,{variant:"h3_medium_secondary",component:"h3",children:t})]}),(0,n.jsx)(i.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(g.Z,{"aria-label":"more",id:"long-button","aria-controls":l?"long-menu":void 0,"aria-expanded":l?"true":void 0,"aria-haspopup":"true",onClick:s,children:(0,n.jsx)(b.Z,{sx:{color:"text.secondary",fontSize:"2rem"}})}),(0,n.jsx)(v.Z,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:o,open:l,onClose:c,PaperProps:{style:{maxHeight:216,width:"auto"}},children:S.map(e=>(0,n.jsxs)(f.Z,{selected:"Pyxis"===e,onClick:()=>u(e),children:[(0,n.jsx)(p.Z,{mr:1,variant:"body_medium_tertiary",component:"p",children:"Delete"===e?(0,n.jsx)(Z.Z,{sx:{color:"#F53E40"}}):(0,n.jsx)(j.Z,{})}),(0,n.jsx)(p.Z,{sx:{color:"Delete"===e&&"#F53E40"},variant:"body_medium_tertiary",component:"p",children:e})]},e))})]})})]})})}var _=r(71666);let k=e=>{var t,r;let{config:p}=e,{endpoint:h,texts:g,getAllFn:v,postFn:f,key:b,deleteFn:j,validation:Z,putFn:y,transform:w=e=>e}=p,E=(0,x.Z)(e=>e.setProgress),S=(0,c.VY)(),k=(0,u.useQueryClient)(),[I,F]=d.useState(!1),[z,D]=(0,d.useState)(null),{isLoading:L,data:P,error:R}=(0,u.useQuery)("get"+b,()=>v(h,{page:1})),M=(0,u.useMutation)(e=>z?y(h,z,w(e),E):f(h,w(e),E),{onSuccess(){F(!1),k.invalidateQueries("get"+b),S.success(z?"Updated":"created")},onError(e){S.error("Failed")}}),q=(0,u.useMutation)(e=>j(h,e),{onSuccess(){k.invalidateQueries("get"+b),S("Deleted"),F(!1)},onError(e){S("Failed")}}),T=e=>{F(!0),D(e)},B=e=>{window.confirm("Do you want to delete this ? ")&&q.mutate({id:e})};return(0,d.useEffect)(e=>{I||D(null)},[I]),(0,n.jsxs)(i.Z,{spacing:2,m:2,divider:(0,n.jsx)(a.Z,{}),children:[(0,n.jsxs)(i.Z,{direction:"row",spacing:3,children:[(0,n.jsx)(s.Z,{sx:{flex:1}}),(0,n.jsx)(o.Z,{variant:"contained",onClick:()=>F(!0),children:null==g?void 0:g.drawerTitle}),I&&(0,n.jsx)(_.Z,{open:I,callback:F,title:z?null==g?void 0:null===(t=g.drawerTitle)||void 0===t?void 0:t.replace("Add","Update"):null==g?void 0:g.drawerTitle,children:(0,n.jsx)(l.Z,{form:p.form,edit:z?{...P.data.find(e=>e.id==z)}:null,submitData:e=>M.mutate({...e}),validationSchema:Z,cancelDrawer:()=>F(!1)})})]}),(0,n.jsx)(i.Z,{sx:{rowGap:1},children:L?"Loading":null==P?void 0:null===(r=P.data)||void 0===r?void 0:r.map((e,t)=>(0,n.jsx)(C,{label:(0,m.I)(e,"**.".concat(g.key)),cb:{Edit:()=>T(e.id),Delete:()=>B(e.id)}},t))})]})};var I=k},69522:function(e,t,r){r.d(t,{Z:function(){return j}});var n=r(85893),i=r(67294),o=r(87357),a=r(15861),l=r(44057),s=r(7145),d=r.n(s),c=r(99272),u=r(49294),x=r(32610),m=r(26447),p=r(93946),h=r(25675),g=r.n(h),v=r(69745);let f=e=>{let{id:t,item:r,options:l,index:s,moveItem:d,items:h,setItems:f,...b}=e,[j,Z]=(0,i.useState)(""),y=e=>{Z(e.target.value),f(t=>t.map(t=>t.id===r.id?{...t,approvers:e.target.value}:t))},w=(0,i.useRef)(null),[{handlerId:E},S]=(0,c.L)({accept:"item",collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var r;if(console.log("item monitor",e,t),!w.current)return;let n=e.index;if(n===s)return;let i=null===(r=w.current)||void 0===r?void 0:r.getBoundingClientRect(),o=(i.bottom-i.top)/2,a=t.getClientOffset(),l=a.y-i.top;n<s&&l<o||n>s&&l>o||(d(n,s),e.index=s)}}),[{isDragging:C},_]=(0,u.c)({type:"item",item:()=>({id:t,index:s}),collect:e=>({isDragging:e.isDragging()})});return _(S(w)),(0,n.jsx)(o.Z,{ref:w,sx:{cursor:"move",opacity:C?0:1},"data-handler-id":E,children:(0,n.jsxs)(m.Z,{direction:"row",sx:{width:"100%",px:1.2,py:1,my:1,border:"1px solid #efefef",borderRadius:"5px"},alignItems:"center",spacing:2,children:[(0,n.jsx)(x.Z,{sx:{fontSize:"2rem",color:"#333"}}),(0,n.jsx)(a.Z,{variant:"h3_bold_secondary",component:"h3",mb:1,children:r.sequence}),(0,n.jsx)(v.Z,{hideLabel:!0,options:l,value:j,onChange:y}),(0,n.jsx)(p.Z,{children:(0,n.jsx)(g(),{src:"/images/trashIcon.svg",width:14,height:14,alt:"checked"})})]})})},b=[{text:"Line Manager",value:"lm"},{text:"Senior Manage",value:"sm"},{text:"CEO",value:"ceo"}];function j(e){var t;let{...r}=e,[s,c]=(0,i.useState)([{id:1,sequence:1,approvers:""},{id:2,sequence:2,approvers:""}]);(0,i.useEffect)(()=>{r.setValue(r.name,s)},[s]);let u=(0,i.useCallback)((e,t)=>{c(r=>d()(r,{$splice:[[e,1],[t,0,r[e]]]})),c(e=>e.map((e,t)=>({...e,sequence:t+1})))},[s]),x=(0,i.useCallback)((e,t)=>(0,n.jsx)(f,{index:t,id:e.id,item:e,setItems:c,items:s,options:b,moveItem:u,...r},e.id),[s]);return(0,n.jsxs)(o.Z,{sx:{width:"100%"},children:[r.headLabel&&(0,n.jsx)(a.Z,{variant:"h3_bold_secondary",component:"h3",mb:1,children:r.headLabel}),(0,n.jsxs)(a.Z,{variant:"body_medium_muted",component:"p",mb:1,children:[r.label,r.isRequired&&(0,n.jsx)(a.Z,{variant:"body_bold",sx:{marginLeft:"4px",color:"#F53E40"},children:"*"})]}),s.map((e,t)=>x(e,t)),(0,n.jsx)(l.Z,{onClick:()=>c([...s,{id:s.length+1,sequence:s.length+1,approvers:""}]),styleOverrides:{width:"100%",my:2,color:"text.primary",fontWeight:600,fontSize:"1.6rem"},variant:"outlined",children:"+ Add another row"})," ",(null===(t=r.error)||void 0===t?void 0:t.message)&&(0,n.jsx)(a.Z,{variant:"h6",sx:{marginLeft:"4px",color:"red"},children:r.error.message})]})}}}]);