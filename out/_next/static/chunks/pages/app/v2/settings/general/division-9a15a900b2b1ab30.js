(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8132],{42761:function(e,i,t){"use strict";var n=t(64836);i.Z=void 0;var o=n(t(64938)),a=t(85893),l=(0,o.default)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");i.Z=l},19211:function(e,i,t){"use strict";t.d(i,{Z:function(){return S}});var n=t(63366),o=t(87462),a=t(67294),l=t(86010),r=t(59766),s=t(94780),d=t(34867),u=t(70182);let c=(0,u.ZP)();var p=t(29628),v=t(39707),m=t(66500),f=t(95408),x=t(98700),g=t(85893);let y=["component","direction","spacing","divider","children","className"],h=(0,m.Z)(),Z=c("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,i)=>i.root});function b(e){return(0,p.Z)({props:e,name:"MuiStack",defaultTheme:h})}let j=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],k=({ownerState:e,theme:i})=>{let t=(0,o.Z)({display:"flex",flexDirection:"column"},(0,f.k9)({theme:i},(0,f.P$)({values:e.direction,breakpoints:i.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let n=(0,x.hB)(i),a=Object.keys(i.breakpoints.values).reduce((i,t)=>(("object"==typeof e.spacing&&null!=e.spacing[t]||"object"==typeof e.direction&&null!=e.direction[t])&&(i[t]=!0),i),{}),l=(0,f.P$)({values:e.direction,base:a}),s=(0,f.P$)({values:e.spacing,base:a});"object"==typeof l&&Object.keys(l).forEach((e,i,t)=>{let n=l[e];if(!n){let o=i>0?l[t[i-1]]:"column";l[e]=o}});let d=(i,t)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${j(t?l[t]:e.direction)}`]:(0,x.NA)(n,i)}});t=(0,r.Z)(t,(0,f.k9)({theme:i},s,d))}return(0,f.dt)(i.breakpoints,t)},D=function(e={}){let{createStyledComponent:i=Z,useThemeProps:t=b,componentName:r="MuiStack"}=e,u=()=>(0,s.Z)({root:["root"]},e=>(0,d.Z)(r,e),{}),c=i(k),p=a.forwardRef(function(e,i){let r=t(e),s=(0,v.Z)(r),{component:d="div",direction:p="column",spacing:m=0,divider:f,children:x,className:h}=s,Z=(0,n.Z)(s,y),b=u();return(0,g.jsx)(c,(0,o.Z)({as:d,ownerState:{direction:p,spacing:m},ref:i,className:(0,l.Z)(b.root,h)},Z,{children:f?function(e,i){let t=a.Children.toArray(e).filter(Boolean);return t.reduce((e,n,o)=>(e.push(n),o<t.length-1&&e.push(a.cloneElement(i,{key:`separator-${o}`})),e),[])}(x,f):x}))});return p}();var S=D},14545:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/v2/settings/general/division",function(){return t(80581)}])},88345:function(e,i,t){"use strict";t.d(i,{Z:function(){return v}});var n=t(85893),o=t(67294),a=t(68245),l=t(15861),r=t(98456),s=t(90629),d=t(13970),u=t(75503),c=t(88767),p=t(87536);function v(e){var i;let{setValue:t,reset:v,label:m,options:f=[{text:"",value:""}],name:x,error:g,isRequired:y,asyncData:h,watch:Z,resetField:b,control:j,getValues:k,...D}=e,S=(0,p.qo)({control:j,name:null==h?void 0:h.lookup}),[E,T]=o.useState("");console.log("watchFields",x,null==h?void 0:h.lookup,S);let{isLoading:w,data:F,error:N,isSuccess:C}=(0,c.useQuery)({queryKey:["get"+(null==h?void 0:h.key),...(null==h?void 0:h.lookup)||[],S,E],queryFn:()=>h.endpointApi("function"==typeof h.endpoint?h.endpoint(S):h.endpoint,{name:E}),enabled:null==h||!h.lookup||(Array.isArray(S)?!S.some(e=>!e):!!S)}),[_,A]=o.useState(!1),[M,P]=o.useState([]),q=_&&0===M.length;return o.useEffect(()=>{let e=!0;if(q)return(async()=>{e&&P([...(null==F?void 0:F.data.map((null==h?void 0:h.optionTransformation)||(e=>({text:e.name,value:e.id||e.stateCode||e.code||e.isoCode}))))||[]])})(),()=>{e=!1}},[q]),(0,n.jsxs)("div",{children:[(0,n.jsxs)(l.Z,{variant:"body_medium_muted",component:"p",mb:1,children:[m,y&&(0,n.jsx)(l.Z,{variant:"body_bold",sx:{marginLeft:"4px",color:"#F53E40"},children:"*"})]}),(0,n.jsx)(a.Z,{popupIcon:w?(0,n.jsx)(r.Z,{color:"inherit",size:20}):(0,n.jsx)(u.Z,{}),sx:{".MuiAutocomplete-option":{color:"#333",fontSize:"1.4rem"},".MuiAutocomplete-endAdornment":{svg:{fontSize:"2rem",fontWeight:500,color:"text.secondary"}}},open:_,onOpen(){A(!0)},onClose(){A(!1)},value:null===(i=k(x))||void 0===i?void 0:i.value,isOptionEqualToValue:(e,i)=>e.value===i.value,onChange:(e,i)=>t(x,i),getOptionLabel:e=>e.text,options:M,loading:w,renderOption:(e,i,t)=>(0,n.jsx)("li",{...e,children:(0,n.jsx)(l.Z,{variant:"body_medium_secondary",component:"p",children:i.text})}),onInputChange(e,i){T(i)},renderInput:e=>(0,n.jsx)(s.Z,{elevation:0,sx:{alignItems:"center",backgroundColor:"background.main",border:"1px solid #EFEFEF",borderRadius:2,display:"flex",marginTop:0,p:1},ref:e.InputProps.ref,children:(0,n.jsx)(d.ZP,{sx:{ml:1,flex:1,fontSize:"1.4rem",fontWeight:500,color:"text.secondary"},...e,endAdornment:(0,n.jsx)(o.Fragment,{children:e.InputProps.endAdornment}),...D})})})]},JSON.stringify(S))}},19716:function(e,i,t){"use strict";t.d(i,{Z:function(){return r}});var n=t(85893),o=t(42761),a=t(13970),l=t(90629);function r(e){let{...i}=e;return(0,n.jsxs)(l.Z,{elevation:0,sx:{alignItems:"center",backgroundColor:"background.main",border:"1px solid #EFEFEF",borderRadius:2,display:"flex",marginTop:0,flex:"auto"},children:[(0,n.jsx)(o.Z,{sx:{fontSize:"1.4rem",margin:"15px 12px 15px 20px",color:"text.muted"}}),(0,n.jsx)(a.ZP,{sx:{ml:1,flex:1,fontSize:"1.4rem",color:"text.secondary"},placeholder:"Search Department",inputProps:{"aria-label":"search department"}})]})}t(67294)},32530:function(e,i,t){"use strict";var n=t(85893),o=t(26447),a=t(44057),l=t(9576),r=t(76595),s=t(19716),d=t(67294),u=t(34578),c=t(88767);t(80681);var p=t(38560),v=t(39272),m=t(42019),f=t(71666);let x=e=>{var i,t;let{config:x}=e,{endpoint:g,texts:y,getAllFn:h,postFn:Z,key:b,deleteFn:j,validation:k,putFn:D,transform:S=e=>e}=x,E=(0,p.Z)(e=>e.setProgress),T=(0,u.VY)(),w=(0,c.useQueryClient)(),[F,N]=d.useState(!1),[C,_]=(0,d.useState)(null),{isLoading:A,data:M,error:P}=(0,c.useQuery)("get"+b,()=>h(g,{page:1})),q=(0,c.useMutation)(e=>C?D(g,C,S(e),E):Z(g,S(e),E),{onSuccess(){N(!1),w.invalidateQueries("get"+b),T.success(C?"Updated":"created")},onError(e){T.error("Failed")}}),z=(0,c.useMutation)(e=>j(g,e),{onSuccess(){w.invalidateQueries("get"+b),T("Deleted"),N(!1)},onError(e){T("Failed")}}),O=e=>{N(!0),_(e)},Q=e=>{window.confirm("Do you want to delete this ? ")&&z.mutate({id:e})};return(0,d.useEffect)(e=>{F||_(null)},[F]),(0,n.jsxs)(o.Z,{spacing:2,m:2,divider:(0,n.jsx)(l.Z,{}),children:[(0,n.jsxs)(o.Z,{direction:"row",spacing:3,children:[(0,n.jsx)(s.Z,{sx:{flex:1}}),(0,n.jsx)(a.Z,{variant:"contained",onClick:()=>N(!0),children:null==y?void 0:y.drawerTitle}),F&&(0,n.jsx)(f.Z,{open:F,callback:N,title:C?null==y?void 0:null===(i=y.drawerTitle)||void 0===i?void 0:i.replace("Add","Update"):null==y?void 0:y.drawerTitle,children:(0,n.jsx)(r.Z,{form:x.form,edit:C?{...M.data.find(e=>e.id==C)}:null,submitData:e=>q.mutate({...e}),validationSchema:k,cancelDrawer:()=>N(!1)})})]}),(0,n.jsx)(o.Z,{sx:{rowGap:1},children:A?"Loading":null==M?void 0:null===(t=M.data)||void 0===t?void 0:t.map((e,i)=>(0,n.jsx)(m.Z,{label:(0,v.I)(e,"**.".concat(y.key)),cb:{Edit:()=>O(e.id),Delete:()=>Q(e.id)}},i))})]})};i.Z=x},19127:function(e,i,t){"use strict";var n=t(85893),o=t(26447),a=t(87357),l=t(44057),r=t(9576);t(76595);var s=t(19716),d=t(67294),u=t(34578),c=t(88767);t(80681);var p=t(38560);t(39272);var v=t(71666),m=t(94546);let f=e=>{var i;let{plan:t,editData:f,clearEdit:x=()=>{},openSideMenu:g,setOpenSideMenu:y}=e,{endpoint:h,postFn:Z,key:b,putFn:j,transform:k=e=>e}=t,D=(0,p.Z)(e=>e.setProgress),S=(0,u.VY)(),E=(0,c.useQueryClient)(),T=(0,c.useMutation)(e=>f?j(h,f.id,k(e),D):Z(h,k(e),D),{onSuccess(){y(!1),E.invalidateQueries("get"+b),S.success((null==f?void 0:f.id)?"Updated":"created")},onError(e){S.error("Failed")}});return(0,d.useEffect)(e=>{f&&(console.log("Opening"),y(!0))},[f]),(0,d.useEffect)(e=>{g||x()},[g]),(0,n.jsx)(o.Z,{spacing:2,m:2,divider:(0,n.jsx)(r.Z,{}),children:(0,n.jsxs)(o.Z,{direction:"row",spacing:3,children:[(0,n.jsx)(s.Z,{sx:{flex:1}}),(0,n.jsx)(l.Z,{variant:"contained",onClick:()=>y(!0),children:null==t?void 0:t.sideBarTitle}),g&&(0,n.jsx)(v.Z,{open:g,callback:y,title:(null==f?void 0:f.id)?null==t?void 0:null===(i=t.sideBarTitle)||void 0===i?void 0:i.replace("Add","Update"):null==t?void 0:t.sideBarTitle,children:(0,n.jsx)(a.Z,{p:2,children:(0,n.jsx)(m.Z,{plan:t,onSubmit:e=>T.mutate({...e}),formData:f})})})]})})};i.Z=f},80581:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return g}});var n=t(85893),o=t(42019),a=t(19127),l=t(19211),r=t(88345),s=t(77339);t(32530);var d=t(54742),u=t(67294),c=t(88767),p=t(558),v=t(39272);let m=[{element:s.Z,attr:{label:"Division Name",name:"division.divisionName"},validation:{validationType:"string",validations:[{type:"required",params:["Division Name is Required"]}]},xs:6},{element:s.Z,attr:{label:"Division Type",name:"division.divisionType"},xs:6},{element:s.Z,attr:{label:"Description",name:"division.description",isMultiline:!0},xs:12},{element:r.Z,attr:{label:"Division Head",name:"division.divisionHead",asyncData:{endpointApi:p.$8,endpoint:"settings/workweek",key:"data"},options:[{text:"Division Head 1",value:"dh1"},{text:"Division Head 2",value:"dh2"},{text:"Division Head 3",value:"dh3"}]},xs:12}],f={sideBarTitle:"Add Division",endpoint:"settings/division",section:{fields:[{label:"Division Name",type:"Text",id:"divisionName",gridSizes:{xs:12,sm:6,md:6,lg:6},config:{placeholder:"Division Name"},validations:[{type:"required"}]},{label:"Division Type",type:"Text",id:"divisionType",gridSizes:{xs:12,sm:6,md:6,lg:6},config:{placeholder:"Division Type"},validations:[{type:"required"}]},{label:"Description",type:"Text",id:"description",gridSizes:{xs:12,sm:6,md:12,lg:12},isMultiline:!0,config:{placeholder:"Description"},validations:[{type:"required"}]},{label:"Division Head",type:"Select",gridSizes:{xs:12,sm:6,md:12,lg:12},id:"divisionHead",validations:[{type:"required"}],select:{type:"inLine",options:[{value:"c152a174-6024-4490-b1ac-5944337bb943",label:"Emp 1"},{value:"a107a512-a6a5-11ed-afa1-0242ac120002",label:"EMp 2"},{value:"a107a6fc-a6a5-11ed-afa1-0242ac120002",label:"Emp 3"}]}}]},postFn:p.fj,putFn:p.m7,key:"division"},x={form:[{header:"",fields:m}],texts:{title:"Division",key:"divisionName",breadcrumbText:"Division",drawerTitle:"Add Division",mainTitle:"List of Divisions",mainDescription:"It is short description for division",sideTitle:"List of Divisions",sideDescription:"This is long long long for division saldkf skflas asfkjdsadklfsadf salkdfklajsfkjlsad lorem description Lorem, ipsum dolor sit amet consectetur adipisicing elit. Qui quidem neque exercitationem aperiam laboriosam at, tempore ipsam natus alias repellat dolorum. Totam commodi eius dolorem laudantium dolores explicabo ex id."},getAllFn:p.$8,postFn:p.fj,putFn:p.m7,deleteFn:p.WN};function g(){var e;let i=(0,c.useQueryClient)(),{isLoading:t,data:r,error:s}=(0,c.useQuery)("get"+f.key,()=>(0,p.$8)(f.endpoint,{page:1})),[m,g]=(0,u.useState)(!1),[y,h]=(0,u.useState)(null),Z=(0,c.useMutation)(e=>(0,p.WN)(f.endpoint,e),{onSuccess(){i.invalidateQueries("get"+f.key),alert("Deleted"),g(!1)},onError(e){alert("Failed")}}),b=e=>{g(!0),h(e)},j=e=>{window.confirm("Do you want to delete this ? ")&&Z.mutate({id:e})};return(0,u.useEffect)(e=>{m||h(null)},[m]),(0,n.jsxs)(d.Z,{texts:x.texts,children:[(0,n.jsx)(a.Z,{plan:f,openSideMenu:m,setOpenSideMenu:g,editData:y}),(0,n.jsx)(l.Z,{sx:{rowGap:1},children:t?"Loading":null==r?void 0:null===(e=r.data)||void 0===e?void 0:e.map((e,i)=>(0,n.jsx)(o.Z,{label:(0,v.I)(e,"**.divisionName"),cb:{Edit:()=>b(e),Delete:()=>j(e.id)}},i))})]})}}},function(e){e.O(0,[3662,3552,4885,5675,7655,129,1489,1567,8360,7417,9912,5003,7757,3513,9482,4546,9774,2888,179],function(){return e(e.s=14545)}),_N_E=e.O()}]);