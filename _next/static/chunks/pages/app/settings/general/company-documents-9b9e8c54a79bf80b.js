(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[562],{52778:function(e,t,n){"use strict";var r=n(64836);t.Z=void 0;var i=r(n(64938)),o=n(85893),l=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4h-3.5z"}),"DeleteOutlineOutlined");t.Z=l},51117:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/settings/general/company-documents",function(){return n(31848)}])},12242:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var r=n(85893),i=n(26447),o=n(44057),l=n(9576),a=n(76595),s=n(42761),d=n(13970),c=n(90629),u=n(67294);function m(e){let{...t}=e;return(0,r.jsxs)(c.Z,{elevation:0,sx:{alignItems:"center",backgroundColor:"background.main",border:"1px solid #EFEFEF",borderRadius:2,display:"flex",marginTop:0,flex:"auto"},children:[(0,r.jsx)(s.Z,{sx:{fontSize:"1.4rem",margin:"15px 12px 15px 20px",color:"text.muted"}}),(0,r.jsx)(d.ZP,{sx:{ml:1,flex:1,fontSize:"1.4rem",color:"text.secondary"},placeholder:"Search Department",inputProps:{"aria-label":"search department"}})]})}var p=n(34578),x=n(88767);n(80681);var g=n(38560),h=n(39272),f=n(15861),j=n(87357),v=n(93946),Z=n(35294),y=n(18972),b=n(57976),w=n(75071),D=n(41733),_=n(25675),k=n.n(_),F=n(1574);let I=["Edit","Delete"];function E(e){let{label:t="",cb:n={}}=e,[o,l]=u.useState(null),a=Boolean(o),s=e=>{l(e.currentTarget)},d=()=>{l(null)},c=e=>{let t=n[e];t&&(t(),d())};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(i.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{border:"1px solid #E4E7EB",borderRadius:1,padding:2},children:[(0,r.jsxs)(i.Z,{direction:"row",alignItems:"center",spacing:1.5,children:[(0,r.jsx)(k(),{src:"/images/starYellow.svg",width:20,height:20,alt:"favourite"}),(0,r.jsx)(F.Z,{size:18,colorVal:"#46C0C0"}),(0,r.jsx)(f.Z,{variant:"h3_medium_secondary",component:"h3",children:t})]}),(0,r.jsx)(i.Z,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:(0,r.jsxs)(j.Z,{children:[(0,r.jsx)(v.Z,{"aria-label":"more",id:"long-button","aria-controls":a?"long-menu":void 0,"aria-expanded":a?"true":void 0,"aria-haspopup":"true",onClick:s,children:(0,r.jsx)(b.Z,{sx:{color:"text.secondary",fontSize:"2rem"}})}),(0,r.jsx)(Z.Z,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:o,open:a,onClose:d,PaperProps:{style:{maxHeight:216,width:"auto"}},children:I.map(e=>(0,r.jsxs)(y.Z,{selected:"Pyxis"===e,onClick:()=>c(e),children:[(0,r.jsx)(f.Z,{mr:1,variant:"body_medium_tertiary",component:"p",children:"Delete"===e?(0,r.jsx)(D.Z,{sx:{color:"#F53E40"}}):(0,r.jsx)(w.Z,{})}),(0,r.jsx)(f.Z,{sx:{color:"Delete"===e&&"#F53E40"},variant:"body_medium_tertiary",component:"p",children:e})]},e))})]})})]})})}var C=n(71666);let S=e=>{var t,n;let{config:s}=e,{endpoint:d,texts:c,getAllFn:f,postFn:j,key:v,deleteFn:Z,validation:y,putFn:b,transform:w=e=>e}=s,D=(0,g.Z)(e=>e.setProgress),_=(0,p.VY)(),k=(0,x.useQueryClient)(),[F,I]=u.useState(!1),[S,T]=(0,u.useState)(null),{isLoading:L,data:P,error:A}=(0,x.useQuery)("get"+v,()=>f(d,{page:1})),M=(0,x.useMutation)(e=>S?b(d,S,w(e),D):j(d,w(e),D),{onSuccess(){I(!1),k.invalidateQueries("get"+v),_.success(S?"Updated":"created")},onError(e){_.error("Failed")}}),N=(0,x.useMutation)(e=>Z(d,e),{onSuccess(){k.invalidateQueries("get"+v),_("Deleted"),I(!1)},onError(e){_("Failed")}}),R=e=>{I(!0),T(e)},z=e=>{window.confirm("Do you want to delete this ? ")&&N.mutate({id:e})};return(0,u.useEffect)(e=>{F||T(null)},[F]),(0,r.jsxs)(i.Z,{spacing:2,m:2,divider:(0,r.jsx)(l.Z,{}),children:[(0,r.jsxs)(i.Z,{direction:"row",spacing:3,children:[(0,r.jsx)(m,{sx:{flex:1}}),(0,r.jsx)(o.Z,{variant:"contained",onClick:()=>I(!0),children:null==c?void 0:c.drawerTitle}),F&&(0,r.jsx)(C.Z,{open:F,callback:I,title:S?null==c?void 0:null===(t=c.drawerTitle)||void 0===t?void 0:t.replace("Add","Update"):null==c?void 0:c.drawerTitle,children:(0,r.jsx)(a.Z,{form:s.form,edit:S?{...P.data.find(e=>e.id==S)}:null,submitData:e=>M.mutate({...e}),validationSchema:y,cancelDrawer:()=>I(!1)})})]}),(0,r.jsx)(i.Z,{sx:{rowGap:1},children:L?"Loading":null==P?void 0:null===(n=P.data)||void 0===n?void 0:n.map((e,t)=>(0,r.jsx)(E,{label:(0,h.I)(e,"**.".concat(c.key)),cb:{Edit:()=>R(e.id),Delete:()=>z(e.id)}},t))})]})};var T=S},31848:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var r=n(85893),i=n(26447),o=n(87357),l=n(15861),a=n(25675),s=n.n(a),d=n(67294),c=n(99272),u=n(1746),m=n(87536),p=n(78462),x=n(97212),g=n(59334),h=n(63366),f=n(87462),j=n(86010),v=n(94780),Z=n(59773),y=n(11496),b=n(33616),w=n(1588),D=n(34867);function _(e){return(0,D.Z)("MuiListItemAvatar",e)}(0,w.Z)("MuiListItemAvatar",["root","alignItemsFlexStart"]);let k=["className"],F=e=>{let{alignItems:t,classes:n}=e;return(0,v.Z)({root:["root","flex-start"===t&&"alignItemsFlexStart"]},_,n)},I=(0,y.ZP)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver(e,t){let{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})(({ownerState:e})=>(0,f.Z)({minWidth:56,flexShrink:0},"flex-start"===e.alignItems&&{marginTop:8})),E=d.forwardRef(function(e,t){let n=(0,b.Z)({props:e,name:"MuiListItemAvatar"}),{className:i}=n,o=(0,h.Z)(n,k),l=d.useContext(Z.Z),a=(0,f.Z)({},n,{alignItems:l.alignItems}),s=F(a);return(0,r.jsx)(I,(0,f.Z)({className:(0,j.Z)(s.root,i),ownerState:a,ref:t},o))});var C=n(52778),S=n(9576),T=n(48885);function L(e){let{file:t,handleRemove:n,isLast:i}=e;return(0,r.jsxs)(p.Z,{alignItems:"center",justifyContent:"center",sx:{width:"100%",bgcolor:"background.paper",padding:0},children:[(0,r.jsxs)(x.ZP,{sx:{px:0},alignItems:"center",children:[(0,r.jsx)(E,{children:(0,r.jsx)(s(),{alt:"file image",src:"/images/pdfIcon.svg",width:36,height:36})}),(0,r.jsx)(g.Z,{primary:(0,r.jsx)(l.Z,{component:"p",variant:"body_medium_primary",children:t}),secondary:(0,r.jsx)(l.Z,{component:"p",variant:"smallcopy_regular_muted",children:"Document - 2.21 MB - .PDF"})}),(0,r.jsx)(T.Z,{onClick:n,sx:{minWidth:0,cursor:"pointer"},children:(0,r.jsx)(C.Z,{sx:{fontSize:"2rem"}})})]}),!i&&(0,r.jsx)(S.Z,{borderColor:"#F0F0F0"})]})}n(88767),n(80681),n(38560);let P={height:"155px",border:"2px dashed #BDCEDD",background:"#FAFAFA",borderRadius:"8px"},A=["/images/pdfIcon.svg","/images/jpgIcon.svg","/images/docIcon.svg","/images/xlsIcon.svg"];var M=n(77339),N=n(12242),R=n(54742),z=n(558),O=n(39272);let Q=[{element:M.Z,attr:{label:"Document Name",name:"document.name"},xs:12},{element:function(e){let{label:t,limit:n,type:a,bucket:p,register:x,name:g,error:h,isRequired:f,control:j}=e,[v,Z]=(0,d.useState)(null),[y,b]=(0,d.useState)(0),{fields:w,append:D,remove:_}=(0,m.Dq)({control:j,name:g}),[{canDrop:k,isOver:F},I]=(0,c.L)(()=>({accept:[u.FILE],drop(e){E&&E(e)},canDrop:e=>!0,hover(e){Z(null)},collect(e){let t=e.getItem();return t&&console.log("Drag: collect",t.files,t.items),{isOver:e.isOver({shallow:!0}),canDrop:e.canDrop()}}}),[e.name]),E=async e=>{if(console.log("dropped",e),e.files.length>n){Z("Only "+n+" files allowed"),setTimeout(e=>{Z(null)},[2e3]);return}if(e.files.some(e=>!a.includes(e.type))){Z("File not allowed"),setTimeout(e=>{Z(null)},[2e3]);return}D(e.files)};(0,d.useEffect)(e=>{console.log(w)},[w]);let C=e=>{let{target:t}=e,{files:n}=t;console.log("files",n),D([n[0]])},S=(0,d.useRef)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{ref:S,onChange:C,type:"file",hidden:!0,multiple:n>1,accept:a}),(0,r.jsxs)(i.Z,{onClick(){var e;return null==S?void 0:null===(e=S.current)||void 0===e?void 0:e.click()},ref:0==y?I:null,style:{...P,background:F?"lightgreen":v?"orange":P.background},justifyContent:"center",alignItems:"center",children:[(0,r.jsx)(o.Z,{mb:2,children:A&&A.map(e=>(0,r.jsx)(s(),{src:e,alt:"Vercel Logo",width:40,height:40,style:{opacity:.7}},e))}),(0,r.jsx)(o.Z,{children:k&&F?(0,r.jsx)(l.Z,{variant:"body_medium_secondary",component:"p",children:"Release to drop"}):(0,r.jsx)(l.Z,{variant:"body_medium_secondary",component:"p",children:v||(0,r.jsxs)(r.Fragment,{children:["Drag & Drop your document here, or"," ",(0,r.jsx)(l.Z,{variant:"body_bold_primary",component:"span",children:"Browse"})]})})}),(0,r.jsx)(l.Z,{variant:"smallcopy_regular_muted",component:"p",children:!v&&"Upload .pdf, .doc, .xls, .jpg & etc"})]}),w.map((e,t)=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{...x("".concat(g,".").concat(t)),hidden:!0},e.id),(0,r.jsx)(m.Qr,{render(e){let{field:{value:n}}=e;return(0,r.jsx)(L,{file:n[t].name,handleRemove:()=>_(t),isLast:t===w.length-1})},name:"".concat(g),control:j},t)]}))]})},attr:{label:"Document Name",name:"file",bucket:"yop-company-docs",limit:1,type:["application/pdf"]},xs:12}],V={form:[{header:"",fields:Q}],endpoint:"settings/companyDocument",texts:{key:"document.name",breadcrumbText:"Comapny Documents",drawerTitle:"Add Document",mainTitle:"List of Documents",mainDescription:"This is short description for division",sideTitle:"Document",sideDescription:"this is long long long for division saldkf skflas asfkjdsadklfsadf salkdfklajsfkjlsad lorem description Lorem, ipsum dolor sit amet consectetur adipisicing elit. Qui quidem neque exercitationem aperiam laboriosam at, tempore ipsam natus alias repellat dolorum. Totam commodi eius dolorem laudantium dolores explicabo ex id."},validation:null,getAllFn:z.$8,postFn:z.fj,putFn:z.m7,deleteFn:z.WN,transform(e){let t=(0,O.w)(e);return console.log("formData out",t),t}};function B(){return(0,r.jsx)(R.Z,{texts:V.texts,children:(0,r.jsx)(N.Z,{config:V})})}}},function(e){e.O(0,[662,552,675,839,371,199,83,774,888,179],function(){return e(e.s=51117)}),_N_E=e.O()}]);